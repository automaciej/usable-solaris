<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.7" />
<title>Solaris 10 preliminary setup</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Solaris 10 preliminary setup</h1>
<span id="author">Maciej Bliziński</span><br />
<span id="revnumber">version 90,</span>
<span id="revdate">2012-07-07</span>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_ssh_access">1. SSH access</h2>
<div class="sectionbody">
<div class="paragraph"><p>If you have just installed a Solaris 10 box and logged in via the
console for the first time, you probably see something similar to this:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Sun Microsystems Inc.   SunOS 5.10      Generic January 2005
# █</tt></pre>
</div></div>
<div class="paragraph"><p>The purpose of this document is to provide a quick overview of how to
set up your Solaris 10 system.</p></div>
<div class="paragraph"><p>The first thing I do after logging in via console, is starting bash.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt># bash -l
bash-3.00# █</tt></pre>
</div></div>
<div class="paragraph"><p>Enable remote root ssh logins for convenience (make sure you have a strong root
password!). <em>I don&#8217;t recommend enabling this for production systems.</em></p></div>
<div class="listingblock">
<div class="content">
<pre><tt>cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak
sed &lt; /etc/ssh/sshd_config.bak &gt; /etc/ssh/sshd_config \
        -e 's/PermitRootLogin no/PermitRootLogin yes/'
svcadm restart ssh</tt></pre>
</div></div>
<div class="paragraph"><p>Now you can login via ssh and avoid working with the slow system console. It&#8217;s
also advisable to have more than one session open just in case something goes
wrong.</p></div>
<div class="paragraph"><p>To find out your IP address:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>ifconfig -a</tt></pre>
</div></div>
<div class="paragraph"><p>Go ahead and log in via ssh. (You need to start bash again.)</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>$ ssh root@&lt;ip-address&gt;
(...)
Sun Microsystems Inc.   SunOS 5.10      Generic January 2005
# bash -l
bash-3.00# █</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_root_8217_s_home_directory_and_shell">2. Root&#8217;s home directory and shell</h2>
<div class="sectionbody">
<div class="paragraph"><p>Let&#8217;s set root&#8217;s home directory and default shell. It&#8217;s been argued that having
<tt>/</tt> as root&#8217;s home directory is fine because you can always use <tt>/var/tmp</tt> for
working files. Yet somehow I don&#8217;t like the idea of having root&#8217;s <tt>.bashrc</tt> and
<tt>.ssh</tt> kept in filesystem&#8217;s root.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>mkdir /root
chmod 0700 /root
chown root:root /root
cp /etc/passwd /etc/passwd.bak
sed &lt; /etc/passwd.bak &gt; /etc/passwd.new \
  -e 's+root:x:0:0:Super-User:/:/sbin/sh+root:x:0:0:Super-User:/root:/bin/bash+'</tt></pre>
</div></div>
<div class="paragraph"><p>You can examine <tt>/etc/passwd.new</tt> to see if it contains the right thing. If it
looks good, copy it to <tt>/etc/passwd</tt>.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>[[ -s /etc/passwd.new ]] &amp;&amp; cp /etc/passwd.new /etc/passwd || echo "It's empty."</tt></pre>
</div></div>
<div class="paragraph"><p>If you can now log off, as these changes require re-login to take effect.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_ssh_keys">3. SSH keys</h2>
<div class="sectionbody">
<div class="paragraph"><p>It&#8217;s a good moment to set up authentication using ssh keys.  From the system
where your keys live, execute a command along these lines:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>ssh-copy-id -i ~/.ssh/id_dsa.pub root@&lt;ip-address&gt;</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_default_path">4. Default PATH</h2>
<div class="sectionbody">
<div class="paragraph"><p>Let&#8217;s set default PATH.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>echo &gt;&gt; /etc/default/login \
  "PATH=/opt/csw/gnu:/opt/csw/sbin:/opt/csw/bin:\
/bin:/sbin:/usr/sbin:/usr/bin:\
/opt/SUNWjet/bin:/usr/sfw/bin:/usr/sfw/sbin:/usr/ccs/bin:\
/opt/SUNWspro/bin"

echo &gt;&gt; /etc/default/login \
"SUPATH=/opt/csw/gnu:/opt/csw/sbin:/opt/csw/bin:\
/bin:/sbin:/usr/sbin:/usr/bin:\
/opt/SUNWjet/bin:/usr/sfw/bin:/usr/sfw/sbin:/usr/ccs/bin:\
/opt/SUNWspro/bin"</tt></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The file <tt>/etc/default/login</tt> doesn&#8217;t really follow shell syntax, and it&#8217;s
not meant to be sourced.</td>
</tr></table>
</div>
<div class="paragraph"><p>It&#8217;s useful to set <tt>MANPATH</tt> as well.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>echo &gt;&gt; /etc/profile \
  "MANPATH=/opt/csw/share/man:/opt/SUNWjet/man:/usr/sfw/share/man\
/opt/SUNWexplo/man:/opt/SUNWspro/man:/usr/share/man"
echo &gt;&gt; /etc/profile "export MANPATH"</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_default_prompt">5. Default prompt</h2>
<div class="sectionbody">
<div class="paragraph"><p>Bash has got sucky prompt by default, let&#8217;s set it to something different.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>PS1='\[\033[01;31m\]\h\[\033[01;34m\] \W \$\[\033[00m\] '
echo "PS1='$PS1'" &gt;&gt; ~/.bashrc
echo '[[ -r ~/.bashrc ]] &amp;&amp; source ~/.bashrc' &gt;&gt; ~/.bash_profile</tt></pre>
</div></div>
<div class="paragraph"><p>Now the prompt should look like this:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>root@vsol01 / # █</tt></pre>
</div></div>
<div class="paragraph"><p>That&#8217;s better. You can now log off (but keep your console session open just in
case) and log in again to see if your <tt>PATH</tt> and prompt are set correctly.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_default_term">6. Default TERM</h2>
<div class="sectionbody">
<div class="paragraph"><p>If you want to do any editing in vi (not vim, but the stock Solaris vi) and
you&#8217;re using GNU screen, you need to set your TERM variable into something that
bare Solaris understands:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>export TERM=xterm</tt></pre>
</div></div>
<div class="paragraph"><p>Don&#8217;t make that permanent in ~/.bashrc, because we&#8217;ll have a better
terminfo later on.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_opencsw">7. OpenCSW</h2>
<div class="sectionbody">
<div class="paragraph"><p>Now, the first thing you most probably want to do, is getting a set of
GNU tools. I recommend using the OpenCSW package repository, as it tends
to have the most up to date versions of packages.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>pkgadd -d http://get.opencsw.org/now all</tt></pre>
</div></div>
<div class="paragraph"><p>Set up the default mirror (optional).</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>echo &gt;&gt; /etc/opt/csw/pkgutil.conf \
  "mirror=ftp://ftp.heanet.ie/pub/opencsw/unstable"</tt></pre>
</div></div>
<div class="paragraph"><p>Update your OpenCSW catalog cache.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>pkgutil -U</tt></pre>
</div></div>
<div class="paragraph"><p>You can now install all the software available from OpenCSW.
Some of my first choices:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>pkgutil -y -i vim elinks findutils gawk ggrep gsed gtar wget rsync sudo \
        screen mc gfile coreutils</tt></pre>
</div></div>
<div class="paragraph"><p>To initialize the findutils database:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>gupdatedb &amp;</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_terminfo">8. Terminfo</h2>
<div class="sectionbody">
<div class="paragraph"><p>If you like to use colors in your terminal, and would like programs
(e.g. vim) to know that your terminal understands colors, you need
a better terminfo.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>pkgutil -y -i terminfo
echo "TERMINFO=/opt/csw/share/terminfo" &gt;&gt; /etc/profile
echo "export TERMINFO" &gt;&gt; /etc/profile</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_pager">9. Pager</h2>
<div class="sectionbody">
<div class="paragraph"><p>Solaris <em>man</em> by default uses the <em>more</em> utility to display output page
by page.  The annoying limitation of <em>more</em> is that it doesn&#8217;t allow you
to scroll backwards.  To get around this, set the PAGER environment
variable.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>pkgutil -y -i less
echo "PAGER=/opt/csw/bin/less" &gt;&gt; /etc/profile
echo "export PAGER" &gt;&gt; /etc/profile</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_regular_user_setup">10. Regular user setup</h2>
<div class="sectionbody">
<div class="paragraph"><p>You probably don&#8217;t want to perform all the operations as root.  You can set up
a regular user account for yourself.  If you&#8217;re accustomed to having your home
directory in /home, an attempt to a user with it will and up with an unhelpful
error message: "UX: useradd: ERROR: Unable to create the home directory:
Operation not applicable."  The problem is that in a default installation, the
/home directory is controlled by autofs.  In order to create directories there,
you need to either disable, or reconfigure autofs.  In this document, we&#8217;ll go
for the disable option.  Set your user name in the first line.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>REGULAR_USER=maciej
svcadm disable autofs &amp;&amp; sleep 2 # Give it time to take effect
useradd -s /bin/bash -m -d /home/${REGULAR_USER} ${REGULAR_USER}
passwd ${REGULAR_USER}</tt></pre>
</div></div>
<div class="paragraph"><p>For convenience, we&#8217;ll also copy the ssh public key to allow easy ssh access.
While we&#8217;re at it, we&#8217;ll also set the prompt.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>mkdir /home/${REGULAR_USER}/.ssh
chmod 700 /home/${REGULAR_USER}/.ssh
cp /root/.ssh/authorized_keys /home/${REGULAR_USER}/.ssh/authorized_keys
UPS1='\[\033[00;33m\]\u@\h\[\033[01;34m\] \w \$\[\033[00m\] '
echo "PS1='$UPS1'" &gt;&gt; /home/${REGULAR_USER}/.bashrc
echo '[[ -r ~/.bashrc ]] &amp;&amp; source ~/.bashrc' \
  &gt;&gt; /home/${REGULAR_USER}/.bash_profile
chown -R ${REGULAR_USER} /home/${REGULAR_USER}</tt></pre>
</div></div>
<div class="paragraph"><p>You will probably want sudo access from your regular user account.  sudo is not
available in the standard Solaris installation, because real men use pfexec.
However, you can install sudo from OpenCSW (see above).  By default, sudo won&#8217;t
allow your user to gain root permissions.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>pkgutil -y -i sudo
echo "${REGULAR_USER} ALL =(ALL) ALL" &gt;&gt; /etc/opt/csw/sudoers
chmod 0440 /etc/opt/csw/sudoers</tt></pre>
</div></div>
<div class="paragraph"><p>Note that generally, <em>visudo</em> is the preferred way to edit the sudoers file.
It&#8217;s just not convenient for scripting.</p></div>
<div class="paragraph"><p>Log in as a regular user, check your PS1, PATH and MANPATH, and your
sudo access.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>maciej@vsol01 ~ $ sudo echo foo

We trust you have received the usual lecture from the local System
Administrator. It usually boils down to these three things:

    #1) Respect the privacy of others.
    #2) Think before you type.
    #3) With great power comes great responsibility.

Password:
foo
maciej@vsol01 ~ $ █</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_congratulations">11. Congratulations!</h2>
<div class="sectionbody">
<div class="paragraph"><p>Your preliminary setup is now complete.  If you have any questions, comments or
suggestions, here&#8217;s my contact information:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>python -c "print 'bWFjaWVqLmJsaXppbnNraUBnbWFpbC5jb20='.decode('base64')"</tt></pre>
</div></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Version 90<br />
Last updated 2012-12-17 00:13:13 GMT
</div>
</div>
</body>
</html>
